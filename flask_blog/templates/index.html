{% extends 'base.html' %}

{% block content %}
<div style="height: 45px;margin: 20px auto 0 auto;">
    <form action="{{ url_for('search') }}" class="parent" method="GET">
        <input type="text" class="search" placeholder="输入关键字搜索" name="keyword" required>
        <button type="prinary" class="searchbtn">搜索</button>
    </form>
</div>
<ul class="layui-row layui-col-space15 main">
    {% for article in articles %}
    <li class="title-article list-card">
        <a style="font-size:23px" href="{{ url_for('details', article_id=article.article_id) }}" >{{ article.title }}</a>
        <div class="float-right">{{ article.add_time.replace(microsecond=0) }}</div>
        <p>
        <div style="font-size:14px; color:grey">
            {{ article.content | truncate(300) }}
        </div>
    </li>
    {% endfor %}
</ul>
{% if current_page %}
    {% if current_page.has_prev %}
        <a href="/?page={{ current_page.prev_num }}">上一页</a>
    {% endif %}

    {% for i in current_page.iter_pages() %}
        <a href="/?page={{ i }}">{{ i }}</a>
    {% endfor %}

    {% if current_page.has_next %}
        <a href="/?page={{ current_page.next_num }}">下一页</a>
    {% endif %}
    当前页数：{{ current_page.page }}
    一共有{{ current_page.total }}条数据
{% endif %}
{% endblock %}